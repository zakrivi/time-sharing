<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>example</title>
</head>

<body>
    <div id="app">
        <div id='my-chart' style="width:90%;height:500px;margin:0 auto;"></div>
    </div>
    <script src="../dist/time-sharing.min.js"></script>
    <script src="./data.js"></script>
    <script>
        var myChart = new timeSharing.InitChart({
            el: '#my-chart',
        })

        myChart.applyConfig({
            colors: {
                up: 'red',
                down: 'green'
            },
            digit: 3,
            schedule_day,
            rawData: data,
            startTime: schedule_day[0].schedule_time[0].start_time * 1000,
            endTime: schedule_day[0].schedule_time[0].end_time * 1000,
            openPrice: lastData.openPrice,
            highPrice: lastData.highPrice,
            lowPrice: lastData.lowPrice,
            closePrice: lastData.closePrice,
            tradingLength: getTradingLen(schedule_day)
        });

        // PC
        ['mousemove', 'mousedown', 'mouseup', 'mouseleave'].forEach(function (key) {
            myChart.subscribe(key, function () {
                console.log(key)
            })
        })

        // H5
        // ['touchend', 'touchstart', 'touchmove'].forEach(function (key) {
        //     myChart.subscribe(key, function () {
        //         console.log(key)
        //     })
        // })
        

        function getTradingLen(schedule_day) {
            if (!schedule_day) {
                return
            }
            const len = schedule_day[0].schedule_time.reduce((total, item) => {
                return Math.ceil(total + (item.end_time - item.start_time) / 60)
            }, 0)
            return len !== 0 ? len : undefined
        }
    </script>
</body>

</html>